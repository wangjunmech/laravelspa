<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>download sound</title>
</head>
<body>
	<h1>弹出窗口自动关闭,\resources\js\components\ref\refpte.vue请求参数: <span id='keypos'></span></h1>
</body>
<script type="text/javascript">
// JS函数用于获取url参数
function getQueryVariable(variable)
{
       var query = window.location.search.substring(1);
       var vars = query.split("&");
       for (var i=0;i<vars.length;i++) {
               var pair = vars[i].split("=");
               if(pair[0] == variable){return pair[1];}
       }
       return(false);
}

//http://www.test.com/index.php?id=1&image=awesome.jpg
//调用 getQueryVariable("id") 返回 1。
//调用 getQueryVariable("image") 返回 "awesome.jpg"
var keyword,keypos;
keyword = getQueryVariable("w");
keypos = document.getElementById('keypos');
keypos.innerHTML=keyword;
var url = '/WebSpider?w='+keyword;

//ajax发送get请求
function ajax(url, fnSucc, fnFaild) {
  //1、创建Ajax对象
  if (window.XMLHttpRequest) {
    var oAjax = new XMLHttpRequest()
  } else {
    var oAjax = new ActiveXObject("Microsoft.XMLHTTP") //为了兼容 ie6
  }
  //2、连接服务器
  oAjax.open('GET', url, true)
  //3、发送请求
  oAjax.send()
  //4、接收返回值
  oAjax.onreadystatechange = function () {
    if (oAjax.readyState == 4) {
      if (oAjax.status == 200) {
        fnSucc(oAjax.responseText)
      } else {
        if(fnFaild){
          fnFaild(oAjax.status)
        }
      }
    }
  }
}
ajax(url, function(data){
    // alert(data);
})

// JS延时自动关闭窗口
function closeit(){
setTimeout("self.close()", 2000); // 设置关闭时间
}
closeit();
</script>
</html>